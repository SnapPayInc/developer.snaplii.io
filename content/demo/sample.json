{
  "info": {
    "title": "订单交易",
    "description": "交易系统是一个微服务。它提供订单及其支付服务。对于有任何资金流的钱包操作，比如购券，卡充值或者扫码支付，都可以通过此服务的订单创建入口来完成下单和支付的全套过程。但是此服务不牵扯到卡，券自身的业务逻辑操作。例如卡券的库存判定，券发放，卡余额的增减，都需要钱包的其他服务来完成。为了确保系统状态的一致性，比如券发放失败，订单和支付都需回滚。所有的操作都必须被包裹到一个全局事务体系当中。\n\n此外，其他非资金流的钱包操作不能调用交易系统服务。例如，开一张$50的卡，必须被拆分成0元开卡和50元充值，其中只有充值才能创建交易系统的订单。还有礼品卡，会员卡的消费都不属于交易系统的业务范畴。",
    "version": "1.0.0"
  },
  "tags": [
    {
      "name": "交易系统"
    }
  ],
  "paths": {
    "/getQuote": {
      "post": {
        "summary": "getQuote",
        "x-apifox-folder": "交易系统",
        "x-apifox-status": "testing",
        "deprecated": false,
        "description": "Before placing an order, it is important to know some detailed payment information and discount info about the order. The call to getQuote returns what payment options can be combined to pay off the order. It also tells if 3ds is required for the primary payment method. It not only allows the cashier to show detailed order info, but also allows users to select the payment method they prefer.\n\n\n```mermaid\nsequenceDiagram\nSnaplii->>Trans.Order: Order Info and item\nTrans.Order-->>Trans: getDiscount\nTrans.Order-->>Trans.Payment: getPaymentOption\nTrans.Order->>Snaplii: Order Quote\nSnaplii->>Snaplii: User making decision on discount and payment\n```",
        "tags": [
          "交易系统"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/orderQuote"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/orderQuote1"
            }
          },
          "400": {
            "description": "参数不正确",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message"
              ],
              "x-apifox-orders": [
                "code",
                "message"
              ]
            }
          }
        },
        "x-run-in-apifox'": "https://www.apifox.cn/web/project/2217282/apis/api-59097018-run",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    },
    "/getThreedsUrl": {
      "post": {
        "summary": "getThreedsUrl",
        "x-apifox-folder": "交易系统",
        "x-apifox-status": "developing",
        "deprecated": false,
        "description": "Get the 3ds verification URL of the given payment options. Snaplii needs to know if a 3ds verification needs to be performed or not before placing an order,  Because creating order cannot be interrupted by any interactive operations.   \n\nA 3ds verification URL will be returned if 3ds is required. The mobile App will launch a web page redirecting to the URL and finish the verification and then continue creating order.\n\nIf no 3ds is required, either not supported or not reaching the threshold, a NULL URL is returned.\n\n\n```mermaid\nsequenceDiagram\nSnaplii->>Trans.Order: getQuote\nrect rgb(191, 223, 255)\nSnaplii-)Trans.Payment: getThreedsUrl\nSnaplii->>App: 3ds URL\nApp->>App: perform 3ds verification\nApp->>Snaplii: 3ds response\nend\nSnaplii->>Trans.Order: createOrder\n```",
        "tags": [
          "交易系统"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/threedsQuery"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/threedsCheckUrl"
            }
          },
          "400": {
            "description": "参数不正确",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message"
              ],
              "x-apifox-orders": [
                "code",
                "message"
              ]
            }
          }
        },
        "x-run-in-apifox'": "https://www.apifox.cn/web/project/2217282/apis/api-59677804-run",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    },
    "/makePayment": {
      "post": {
        "summary": "makePayment",
        "x-apifox-folder": "交易系统",
        "x-apifox-status": "developing",
        "deprecated": false,
        "description": "Make a payment for a transaction.  The entire transaction is under ONE global transaction which means any invocation to this endpoint has to be wrapped in an entrance decorated with @GlobalTransaction.",
        "tags": [
          "交易系统"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/paymentRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/paymentResponse"
            }
          },
          "400": {
            "description": "参数不正确",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message"
              ],
              "x-apifox-orders": [
                "code",
                "message"
              ]
            }
          }
        },
        "x-run-in-apifox'": "https://www.apifox.cn/web/project/2217282/apis/api-60109175-run",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    },
    "/refundOrder": {
      "post": {
        "summary": "refundOrder",
        "x-apifox-folder": "交易系统",
        "x-apifox-status": "developing",
        "deprecated": false,
        "description": "Create a refund for a previous payment. It could be a full refund or partial refund. The refund will fail if the requested amount is greater than the fund available to refund.  \n\nWhen creating an order, a refundable amount will be returned which is equal or less than the paid amount. When making a refund, partial or full, the requesting amount plus the previously refunded amount has to be equal or less than the refundable amount. If the condition is not met, the \"refundOrder\" will not try to refund as much as possible but simply fails.",
        "tags": [
          "交易系统"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/refundRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/refundResponse"
            }
          },
          "400": {
            "description": "参数不正确",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message"
              ],
              "x-apifox-orders": [
                "code",
                "message"
              ]
            }
          }
        },
        "x-run-in-apifox'": "https://www.apifox.cn/web/project/2217282/apis/api-60947989-run",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    },
    "/createOrder": {
      "post": {
        "summary": "createOrder",
        "x-apifox-folder": "交易系统",
        "x-apifox-status": "developing",
        "deprecated": false,
        "description": "createOrder是一个非交互型的的操作，它完成整个订单的创建和支付流程。它需要被放置到一个全局事务管理中，所以所有订单相关的discount和payment option以及3ds等信息必须全部事先得到。  \n如果创建订单失败，订单不会生成，支付也不会成功。\n\n\n```mermaid\nsequenceDiagram\nSnaplii->>Trans.Order: getQuote\nSnaplii->>3ds Service: Verify 3ds\nSnaplii->>Snaplii.core: Order info, discounts, payment options, 3ds response\nSnaplii.core-->>Trans.Order: createOrder\nTrans.Order-->>Trans.Payment: makePayment\n```",
        "tags": [
          "交易系统"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/orderRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "schema": {
              "$ref": "#/definitions/orderResponse"
            }
          },
          "400": {
            "description": "参数不正确",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer"
                },
                "message": {
                  "type": "string"
                }
              },
              "required": [
                "code",
                "message"
              ],
              "x-apifox-orders": [
                "code",
                "message"
              ]
            }
          }
        },
        "x-run-in-apifox'": "https://www.apifox.cn/web/project/2217282/apis/api-63270482-run",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    }
  },
  "swagger": "2.0",
  "definitions": {
    "orderRequest": {
      "type": "object",
      "properties": {
        "orderInfo": {
          "$ref": "#/definitions/orderInfo"
        },
        "discounts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/orderDiscount"
          },
          "title": "所有订单折扣",
          "description": "All discounts that can be applied to the given order"
        },
        "paymentOptions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentOption"
          },
          "title": "所有支付手段",
          "description": "All payment methods that can be used to pay off the order"
        },
        "threedsResponse": {
          "type": "string",
          "title": "3ds的响应结果",
          "description": "The response of a 3ds verification if there is any or NULL"
        },
        "journalNo": {
          "type": "string",
          "description": "A journal number generated by the caller to track the order in its entire processing cycle",
          "title": "订单流水号"
        }
      },
      "title": "订单请求",
      "x-apifox-orders": [
        "orderInfo",
        "discounts",
        "paymentOptions",
        "threedsResponse",
        "journalNo"
      ],
      "required": [
        "orderInfo",
        "discounts",
        "paymentOptions",
        "threedsResponse",
        "journalNo"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "orderResponse": {
      "type": "object",
      "properties": {
        "orderNo": {
          "type": "string",
          "title": "订单号",
          "description": "The number of the order for which the payment is made"
        },
        "refundableAmount": {
          "type": "number",
          "title": "最大可用于退款的金额",
          "description": "The maximum amount of the order that can be refuned"
        },
        "settledAmount": {
          "type": "number",
          "description": "The amount that will be paid to the merchant. It could be different from the order amount in the case when some discounts, coupon for example,  have been applied.",
          "title": "结算金额"
        },
        "discounts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/orderDiscount"
          },
          "title": "所有用到的订单折扣",
          "description": "All the discounts that have been used for the given order"
        },
        "paymentOptions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentOption"
          },
          "title": "所有用到的支付手段",
          "description": "All payment methods that have been used to pay off the order"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "title": "订单完成时间",
          "description": "The time when the given order is finished. The order can be succeeded or failed."
        },
        "responseCode": {
          "type": "string",
          "title": "响应代码",
          "description": "The response code. Anyone not ending with 00000 indicates an error"
        },
        "responseMessage": {
          "type": "string",
          "title": "错误信息",
          "description": "The errors description when a response code shows a non-success code"
        }
      },
      "title": "订单生成结果",
      "x-apifox-orders": [
        "orderNo",
        "refundableAmount",
        "settledAmount",
        "discounts",
        "paymentOptions",
        "createdAt",
        "responseCode",
        "responseMessage"
      ],
      "required": [
        "createdAt",
        "responseCode",
        "responseMessage",
        "refundableAmount"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "orderInfo": {
      "type": "object",
      "properties": {
        "currency": {
          "type": "string",
          "enum": [
            "CAD"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "CAD": "Canadian Dollar"
            }
          },
          "title": "货币",
          "description": "Only Canadian dollar is supported right now"
        },
        "businessType": {
          "type": "string",
          "minLength": 4,
          "maxLength": 4,
          "title": "业务类型",
          "description": "The business type is used to categorize an order for ledger purpose"
        },
        "orderType": {
          "type": "string",
          "enum": [
            "TOPUP",
            "BUY_COUPON",
            "QR_PAYMENT"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "TOPUP": "to topup a prepaid card",
              "BUY_COUPON": "to buy a coupon",
              "QR_PAYMENT": "to make a payment via qr code"
            }
          },
          "title": "订单类型",
          "description": "The order type represented by the enum - TOPUP, BUY_COUPON and QR_PAYMENT"
        },
        "businessChannel": {
          "type": "string",
          "enum": [
            "POS",
            "APP"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "POS": "the point of sale machine",
              "APP": "the snaplii wallet app"
            }
          },
          "title": "订单发起渠道",
          "description": "The channel from which an order is initiated"
        },
        "userNo": {
          "type": "string",
          "pattern": "110(\\d){10}",
          "title": "用户号",
          "description": "The user no"
        },
        "merchantId": {
          "type": "string",
          "title": "商户号",
          "description": "The id of the merchant at which an order is place. Noted, it is the id of the store but not the headquater"
        },
        "amount": {
          "type": "number",
          "minimum": 0.01,
          "title": "订单金额",
          "description": "The order amount"
        },
        "coupon_no": {
          "type": "string",
          "title": "券编码",
          "description": "The coupon no, if the order type is BUY_COUPON"
        },
        "cardProductCode": {
          "type": "string",
          "title": "卡产品号",
          "description": "The card product code, if the order type is TOPUP"
        },
        "goodsId": {
          "type": "string",
          "title": "卡商品号",
          "description": "The goods id of a card, if the order type is TOPUP"
        },
        "cardNo": {
          "type": "string",
          "title": "卡号",
          "description": "The card no, if the order type is TOPUP"
        },
        "qrCode": {
          "type": "string",
          "title": "二维码",
          "description": "The qr code, if the order type is QR_PAYMENT"
        }
      },
      "title": "订单基本信息",
      "x-apifox-orders": [
        "currency",
        "businessType",
        "orderType",
        "businessChannel",
        "userNo",
        "merchantId",
        "amount",
        "coupon_no",
        "cardProductCode",
        "goodsId",
        "cardNo",
        "qrCode"
      ],
      "required": [
        "currency",
        "businessType",
        "orderType",
        "businessChannel",
        "userNo",
        "merchantId",
        "amount"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "orderQuote": {
      "type": "object",
      "properties": {
        "orderInfo": {
          "$ref": "#/definitions/orderInfo"
        },
        "voucherOption": {
          "type": "string",
          "title": "现金券使用选项",
          "description": "The options of how to use a voucher if there is one available. If null, the system will choose the most appropriate one",
          "enum": [
            "NOT_USE",
            "MAX_AMOUNT",
            "BEST_FIT"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "NOT_USE": "不使用",
              "MAX_AMOUNT": "使用最大金额的",
              "BEST_FIT": "使用最接近金额的"
            }
          }
        },
        "specifiedVoucher": {
          "type": "string",
          "title": "用户指定使用的现金券",
          "description": "A voucher specified by the user for this order"
        },
        "primaryPaymentMethod": {
          "type": "string",
          "enum": [
            "CREDIT_CARD",
            "SNAPLII_CREDIT"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "CREDIT_CARD": "",
              "SNAPLII_CREDIT": ""
            }
          },
          "title": "主支付方式",
          "description": "The primary payment method"
        }
      },
      "title": "订单选项查询",
      "x-apifox-orders": [
        "orderInfo",
        "voucherOption",
        "specifiedVoucher",
        "primaryPaymentMethod"
      ],
      "required": [
        "orderInfo",
        "voucherOption",
        "primaryPaymentMethod"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "refundResponse": {
      "type": "object",
      "properties": {
        "originalOrderNo": {
          "type": "string",
          "title": "原始订单号",
          "description": "The original order number."
        },
        "refundOrderNo": {
          "type": "string",
          "title": "退款单号",
          "description": "The refund order number."
        },
        "refundTime": {
          "type": "string",
          "title": "退款时间",
          "format": "date-time",
          "description": "The time when the refund is finished."
        },
        "fundLeftForRefund": {
          "type": "number",
          "title": "剩余的可退款额度",
          "minimum": 0,
          "description": "The remaining fund for next refund."
        },
        "refundDetails": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentItem"
          }
        },
        "responseCode": {
          "type": "string",
          "title": "退款返回码",
          "description": "The response code. Anyone not ending with 00000 indicates an error"
        },
        "responseMessage": {
          "type": "string",
          "title": "退款信息",
          "description": "The errors description when a response code shows a non-success code"
        }
      },
      "title": "退款请求结果",
      "x-apifox-orders": [
        "originalOrderNo",
        "refundOrderNo",
        "refundTime",
        "fundLeftForRefund",
        "refundDetails",
        "responseCode",
        "responseMessage"
      ],
      "required": [
        "originalOrderNo",
        "refundOrderNo",
        "refundTime",
        "fundLeftForRefund",
        "responseCode",
        "responseMessage",
        "refundDetails"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "refundRequest": {
      "type": "object",
      "properties": {
        "orderNo": {
          "type": "string",
          "title": "原始订单单号",
          "description": "The orginal order number."
        },
        "amount": {
          "type": "number",
          "title": "退款金额",
          "description": "The refund amount",
          "minimum": 0.01
        },
        "journalNo": {
          "type": "string",
          "description": "A journal number generated by the caller to track the order in its entire processing cycle",
          "title": "订单流水号"
        }
      },
      "title": "退款请求",
      "x-apifox-orders": [
        "orderNo",
        "amount",
        "journalNo"
      ],
      "required": [
        "orderNo",
        "amount",
        "journalNo"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "paymentItem": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "支付方法的id号",
          "description": "The id of a payment method. It varies for different payment method. It could be the code of a voucher, token of a credit card or the card no of snaplii credit."
        },
        "type": {
          "type": "string",
          "title": "支付方法的类别",
          "description": "The name of the payment method.",
          "enum": [
            "VOUCHER",
            "SNAPLII_CASH",
            "CREDIT_CARD",
            "SNAPLII_CREDIT"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "VOUCHER": "代金券",
              "SNAPLII_CASH": "余额",
              "CREDIT_CARD": "信用卡",
              "SNAPLII_CREDIT": "信用付"
            }
          }
        },
        "amount": {
          "type": "number",
          "title": "支付金额",
          "description": "The amount paid with the given payment method."
        },
        "selected": {
          "type": "boolean",
          "description": "if the given payment options is a selected one. It could be one auto selected by the system or selected by the user. In a case when multiple vouchers are returned in a getOrderQuote request, there will be only one that is selected.",
          "title": "是否是选定的的支付选项"
        }
      },
      "title": "支付细节",
      "x-apifox-orders": [
        "id",
        "type",
        "amount",
        "selected"
      ],
      "required": [
        "type",
        "amount",
        "id",
        "selected"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "paymentResponse": {
      "type": "object",
      "properties": {
        "transactionNo": {
          "type": "string",
          "title": "支付单编号",
          "description": "The order number"
        },
        "settledAmount": {
          "type": "number",
          "title": "交易金额",
          "description": "The transaction amount that will be paid to the merchant. It could be different from the order amount in the case when some discounts, coupon for example,  have been applied."
        },
        "paidAmount": {
          "type": "number",
          "title": "支付金额",
          "description": "The amount paid by the client. It could be different from the transaction amount if vouchers or other secondary payment otions have been used."
        },
        "transactionTime": {
          "type": "string",
          "format": "date-time",
          "title": "支付完成时间",
          "description": "The time when a payment is finished"
        },
        "transactionStatus": {
          "type": "string",
          "enum": [
            "SUCCESS",
            "FAILED"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "SUCCESS": "成功支付",
              "FAILED": "支付失败"
            }
          },
          "title": "支付状态",
          "description": "payment status"
        },
        "paymentDetails": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentItem"
          }
        },
        "responseCode": {
          "type": "string",
          "title": "支付返回码",
          "description": "The response code. Anyone not ending with 00000 indicates an error",
          "x-nullable": true
        },
        "responseMessage": {
          "type": "string",
          "description": "The errors description when a response code shows a non-success code",
          "title": "错误信息",
          "x-nullable": true
        }
      },
      "title": "支付结果返回信息",
      "x-apifox-orders": [
        "transactionNo",
        "settledAmount",
        "paidAmount",
        "transactionTime",
        "transactionStatus",
        "paymentDetails",
        "responseCode",
        "responseMessage"
      ],
      "required": [
        "settledAmount",
        "paidAmount",
        "transactionTime",
        "transactionStatus",
        "paymentDetails"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "paymentRequest": {
      "type": "object",
      "properties": {
        "transactionInfo": {
          "$ref": "#/definitions/TransactionInfo",
          "title": "交易信息",
          "description": "The order basic information"
        },
        "threedsResponse": {
          "type": "string",
          "title": "3ds的响应结果",
          "description": "The response of a 3ds verification if there is any or NULL"
        },
        "paymentOptions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentItem"
          },
          "title": "支付选项",
          "description": "Payment options for this transaction which is specified by the user. It could be null if the user decide to have the system choose automatically (it is the case when making a payment for qr pay)"
        },
        "journal_no": {
          "type": "string",
          "title": "订单流水号",
          "description": "A journal number generated by the caller to track the order in its entire processing cycle"
        }
      },
      "title": "支付请求",
      "x-apifox-orders": [
        "transactionInfo",
        "threedsResponse",
        "paymentOptions",
        "journal_no"
      ],
      "required": [
        "transactionInfo",
        "journal_no"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "threedsCheckUrl": {
      "type": "object",
      "properties": {
        "url": {
          "type": "string",
          "title": "3ds服务商提供的验证URL",
          "description": "A URL provided by the 3ds vendor. It links to a page to verify a client's identity.",
          "x-nullable": true
        },
        "support3ds": {
          "type": "boolean",
          "default": "true",
          "title": "此订单支付是否支持3ds",
          "description": "If the order contains a payment that supports 3ds or not"
        },
        "threedsKey": {
          "type": "string",
          "title": "3ds请求的引用",
          "description": "A reference pointing to the 3ds request. When a user finishes the 3ds verification, he can continue the transaction which is assiocated with the 3ds query request."
        },
        "responseCode": {
          "type": "string",
          "title": "响应代码",
          "description": "The response code. Anyone not ending with 00000 indicates an error"
        },
        "responseMessage": {
          "type": "string",
          "description": "The errors description when a response code shows a non-success code",
          "title": "错误信息"
        }
      },
      "title": "3ds校验地址",
      "x-apifox-orders": [
        "url",
        "support3ds",
        "threedsKey",
        "responseCode",
        "responseMessage"
      ],
      "required": [
        "url",
        "support3ds",
        "responseCode",
        "responseMessage"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "threedsQuery": {
      "type": "object",
      "properties": {
        "transactionJournalNo": {
          "type": "string",
          "description": "A journal number generated by the caller to track the order in its entire processing cycle. This number will be used to associate the 3ds with a specific transaction.",
          "title": "订单流水号"
        },
        "paymentOptions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentOption"
          }
        }
      },
      "title": "3ds查询",
      "x-apifox-orders": [
        "transactionJournalNo",
        "paymentOptions"
      ],
      "required": [
        "paymentOptions",
        "transactionJournalNo"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "paymentOption": {
      "type": "object",
      "properties": {
        "detail": {
          "$ref": "#/definitions/paymentItem"
        },
        "primary": {
          "type": "boolean",
          "default": "false",
          "title": "是否是主支付手段",
          "description": "If the given payment option is the primary payment method. Usually only credit card or snaplii-credit is a primary payment option."
        }
      },
      "title": "支付选项",
      "x-apifox-orders": [
        "detail",
        "primary"
      ],
      "required": [
        "primary",
        "detail"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "orderDiscount": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "title": "折扣类型",
          "description": "The discount type, the possible values are DISCOUNT, COUPON or CASHBACK",
          "enum": [
            "DISCOUNT",
            "COUPON",
            "CASHBACK",
            "TOPUP_DISCOUNT",
            "TOPUP_BONUS"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "DISCOUNT": "the discount used to deduct the order amount",
              "COUPON": "the coupon issued by merchants to deduct order amount",
              "CASHBACK": "the amount in users' cashback card for order amount deduction",
              "TOPUP_DISCOUNT": " the discount amount used for topping up membership card",
              "TOPUP_BONUS": " the extra bonus amount added to users' membership card in topping up."
            }
          }
        },
        "amount": {
          "type": "number",
          "title": "折扣金额",
          "description": "The discount amount"
        },
        "code": {
          "type": "string",
          "title": "折扣码",
          "description": "The code representing a discount. It is the card no for a cashback card or the coupon no for a coupon, or the goods id for topping up"
        }
      },
      "title": "订单折扣",
      "x-apifox-orders": [
        "type",
        "amount",
        "code"
      ],
      "required": [
        "type",
        "amount"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "orderQuote1": {
      "type": "object",
      "properties": {
        "discounts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/orderDiscount"
          },
          "uniqueItems": true
        },
        "paymentOptions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/paymentOption"
          },
          "title": "订单支付选项",
          "description": "The payment options for a given order",
          "uniqueItems": true
        },
        "responseCode": {
          "type": "string",
          "title": "响应代码",
          "description": "The response code. Anyone not ending with 00000 indicates an error"
        },
        "responseMessage": {
          "type": "string",
          "description": "The errors description when a response code shows a non-success code",
          "title": "错误信息"
        }
      },
      "title": "订单折扣及支付选项",
      "x-apifox-orders": [
        "discounts",
        "paymentOptions",
        "responseCode",
        "responseMessage"
      ],
      "required": [
        "paymentOptions",
        "responseCode",
        "responseMessage",
        "discounts"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    },
    "TransactionInfo": {
      "type": "object",
      "properties": {
        "orderNo": {
          "type": "string",
          "examples": [
            "TL118000001220125000003"
          ],
          "title": "订单号",
          "description": "The number of the order for which the payment is made"
        },
        "businessType": {
          "type": "string",
          "minLength": 4,
          "maxLength": 4,
          "title": "业务类型",
          "description": "The business type is used to categorize an order for ledger purpose"
        },
        "orderType": {
          "type": "string",
          "enum": [
            "TOPUP",
            "BUY_COUPON",
            "QR_PAYMENT"
          ],
          "x-apifox": {
            "enumDescriptions": {
              "TOPUP": "to topup a prepaid card",
              "BUY_COUPON": "to buy a coupon",
              "QR_PAYMENT": "to make a payment via qr code"
            }
          },
          "title": "订单类型",
          "description": "The order type represented by the enum - TOPUP, BUY_COUPON and QR_PAYMENT"
        },
        "userNo": {
          "type": "string",
          "pattern": "110(\\d){10}",
          "title": "用户号",
          "description": "The user no"
        },
        "merchantId": {
          "type": "string",
          "title": "商户号",
          "description": "The id of the merchant at which an order is place. Noted, it is the id of the store but not the headquater"
        },
        "amount": {
          "type": "number",
          "minimum": 0.01,
          "title": "交易金额",
          "description": "The order amount that has to be paid"
        }
      },
      "title": "交易基本信息",
      "x-apifox-orders": [
        "orderNo",
        "businessType",
        "orderType",
        "userNo",
        "merchantId",
        "amount"
      ],
      "required": [
        "businessType",
        "orderType",
        "userNo",
        "merchantId",
        "amount",
        "orderNo"
      ],
      "x-apifox-ignore-properties": [],
      "x-apifox-folder": "交易系统"
    }
  },
  "x-components": {}
}